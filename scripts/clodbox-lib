#!/usr/bin/env bash
# Shared library for clodbox scripts. Sourced, not executed directly.

# Absolute path; parameters: current value, default value
_get_abspath_() { echo "${1:+$(realpath -m $1)}${1:-$(realpath -m $2)}"; }

# Resolve HOME and XDG config path.
: ${HOME:="~"}
XDG_CONFIG_HOME=$(_get_abspath_ "${XDG_CONFIG_HOME:-}" "$HOME/.config")
CLODBOX_CONFIG_FILE="$XDG_CONFIG_HOME/clodbox/clodbox.rc"

# Copy file only if source is strictly newer than destination (by mtime).
_cp_if_newer_() {
  local src="$1" dst="$2"
  if [ ! -f "$dst" ] || [ "$(stat -c %Y "$src")" -gt "$(stat -c %Y "$dst")" ]; then
    cp "$src" "$dst"
  fi
}
